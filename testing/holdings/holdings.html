
<?php include 'includes/header.html';?>
<!--php composer.phar-->
<h2>Find EAST Holdings</h2>
To Do:
<ul>
    <li>Add isbn search</li>
    <li>Add issn search</li>
    <li>total worldcat? </li>
    <li>all alt numbers? </li>
    <li>getOCLCHoldings needs to just return a message if api fails = what does file_get_contents return?</li>
    <li>probably need to add another table for operational contacts...keeping that up to date will be problematic
can spreadsheet be queried?</li>
    <li>monograph vs retention partners</li>
</ul>
<br />
<form name="queryForm" id="queryForm" action="/testing/holdings/searchresults" method="get">

    <div id="numberError"></div>
    <div>
        <span class="easttext">SEARCH:</span>
        <select name="searchField" id="searchField">
            <option value="worldcat_oclc_nbr">OCLC Number</option>
            <option value="isbn">ISBN</option>
            <option value="issn">ISSN</option>
        </select>
        <input type="text"  size="40" name="query" id="query" value=""/>
        <select name="frbr" id="frbr">
            <option value="on">FRBR On</option>
            <option value="off">FRBR Off</option>
        </select>
    </div>
        <input class="easttext" type="submit" value="Submit">
    <hr />
</form>

<p>
    Samples: <br />
    Hathi:  424023<br />
    EAST not retained: 644583935<br />
    Broken OCLC JSON:  123474447 <br />
    4 holders: 10016015 <br/>
    has holdings: 3704706 <br/>
    Hathi PD: 5907756 <br/>
    IA: 1418726 <br/>
    IA & Hathi: 492364, 14219719<br />
    isbn: 9781876040222 , 0001002762729 <br/>
    issn: 1534-3219 </br>
    not in bib info but has alt oclc: 327, 21726742 | not in bib info but has multi alt oclc: 68082962 | in bib info and alt: 1172085


</p>
<!--
**Double check on service level - does full get you more holdings? **
* https://www.oclc.org/developer/develop/web-services/worldcat-search-api/service-levels.en.html
-->


<script type="text/javascript">
/*
    $("input[name='libraries[]']:checkbox").click(function () {
        $("input[id='any']:checkbox").prop('checked', false);
    });

    $('#any').click(function () {
        $("input[name='libraries[]']:checkbox").prop('checked', false);
    });
*/
    $("#queryForm").submit(function( event ) {
        var $entry = $("#query").val().trim()
        if ( ($('#searchField').val() == 'worldcat_oclc_nbr') && (isNaN($entry)) ) {
            $('#numberError').html( "<span class='red'>Numbers only allowed in OCLC search</span>" );
            event.preventDefault();
        } else {
            $('#numberError').html( "" );
        }

    });


</script>

<p>
From: https://www.oclc.org/developer/develop/web-services/worldcat-search-api/library-locations.en.html
    Known Issues<br/>
    Queries for Merged OCLC Numbers result in no holdings
    When an OCLC number has been merged under another record, the merged OCLC number is in the 019 field of that bibliographic record.  Using the merged OCLC number in a query correctly pulls the record which includes the 019 field for all SRU queries and Single Bibliographic record queries. However, for Library Catalog Resource requests, the merged OCLC number only works correctly if frbrGrouping is set to “on” or on by default.  When the frbrGrouping parameter is set to “off” the merged OCLC number request incorrectly results in indicating there are no holdings.



</p>

<?php include 'includes/footer.html';?>

